//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//PER CODICE COPYRIGHT
  DateX = new Date()
  document.getElementById("CopyRightTextPar").innerHTML = "Copyright M.S. " + DateX.getFullYear() +" ©"
  
 
   const delay = ms => new Promise(res => setTimeout(res, ms));
   async function topFunction() {
       document.body.scrollTop = 0;
       document.documentElement.scrollTop =0;
            

   }

//FINE CODICE COPYRIGHT
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//PER BOX  FULMINE

var count = 0;
var arr =[];

// let box_tesla = document.querySelector('#box-tesla');
let cv = document.querySelector("#canvas");
 
// box_tesla.addEventListener("mousemove", CreaFulmini);
cv.addEventListener("mousemove", CreaFulmini);

function CreaFulmini(e){

  count +=1;
  const canvas = document.querySelector('#canvas');
  if (canvas.getContext){

  const ctx = setupCanvas(document.querySelector('#canvas'));
  
  if (count ==1){

    drawLine(ctx,  getCenter(), e, 4 );
  }else if (count>2){
    count =0;
    drawLine(ctx, getCenter(),e, 5 );

  }
  
  }  
  cv = document.getElementById("canvas");
  cv.addEventListener("mouseleave", function pulisci(){ const canvas = document.querySelector('#canvas'); const context = canvas.getContext('2d');
  context.clearRect(0, 0, canvas.width, canvas.height);});
}     



 
function drawLine(ctx, begin, e ,width = 1) {
 

  ctx.strokeStyle ='white';
  ctx.shadowColor ='violet';
  ctx.shadowOffsetX=3;
  ctx.shadowOffsetY=2;
  ctx.shadowBlur=15;
  if (width) {
      ctx.lineWidth = width;
  }

  ctx.beginPath();

  ctx.moveTo(...begin);
  
  
  arr.push(GetPosition(e));

 for(var i = 0; i<arr.length; i++){
     
  
 
  ctx.lineTo(...arr[i]); 
 
 
 }

  ctx.stroke();
 
  
}

function Rand(e){ x= e.clientX; y = e.clientY; var dimX = (2*Math.PI*x)/180; var dimY=(2*Math.PI*y*y)/180; return [dimX,dimY]}
function GetPosition(e) {x = e.clientX; y = e.clientY; return[x,y]}
function getRandomInt(max) {
  return Math.floor(Math.random() * max);
}


function getCenter(){
   
   x = (cv.offsetWidth/2);
  y = (cv.scrollHeight/2);
   return [x,y];
}

function setupCanvas(canvas) {
 
  var dpr = window.devicePixelRatio || 1;
 
  var rect = canvas.getBoundingClientRect();
 
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  var ctx = canvas.getContext('2d');
 
  ctx.scale(dpr, dpr);
  return ctx;
}
//FINE BOX FULIMINI
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Ricarica al click sulle emojis
function reload(){window.location.reload(true); }

// CAMBIA LE EMOJIS
async function changeEmojis(){

while(true){

  await delay(3000);

  document.getElementById("emojis").innerHTML = "💘";

  await delay(3000);

  document.getElementById("emojis").innerHTML = "🥇";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "✨";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "🥰";

  await delay(3000);

  document.getElementById("emojis").innerHTML = "😭";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "🔥";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "🌹";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "😋";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "😇";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "♻";
  await delay(3000);

  document.getElementById("emojis").innerHTML = "👌";

  await delay(3000);

  document.getElementById("emojis").innerHTML = "🙏";
  
}
 

}

changeEmojis()

//FINE CAMBIO EMOJIS
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// THE GAME

arr =[];
let _gameCanvas_ = document.querySelector("#TheGame");

var _gameCanvasSetted_ = setupCanvas(document.querySelector('#TheGame'));;
var rocket = "🚀"
 


window.addEventListener('mousemove',loadStars());

 
var z= 0;
async function loadStars(){
 z +=1;

  if (_gameCanvas_.getContext){
  
    _gameCanvasSetted_ = setupCanvas(document.querySelector('#TheGame'));
    
    while(true){

      stars(_gameCanvasSetted_);
      
      req = window.requestAnimationFrame(loadStars);  
      await delay(5800);
      window.cancelAnimationFrame(req);
      // moveBall();
    }
    
  
  }
}

// arr.push(GetPosition(e));
// for(var i = 0; i<arr.length; i++){
     
     
     
     
//   _gameCanvasSetted_.font = "30px Comic Sans MS";
//   _gameCanvasSetted_.fillText(rocket,...arr[i]);
 
//  }
var ballX = 400;
var ballY = 400;  
var mouseX = 0;
var mouseY = 0;

 
function mouseMove(evt) {
  mouseX = evt.clientX;
  mouseY = evt.clientY;
}
function moveBall() {
 
  var dx = (mouseX - ballX) * .125;
  var dy = (mouseY - ballY) * .125;
  
  var distance = Math.sqrt(dx*dx + dy*dy);
 
  if(distance > 5){
    dx *= 5/distance;
    dy *= 5/distance;
  }
  ballX += dx;
  ballY += dy;
  
  var canvas = document.getElementById("TheGame");
  var ctx = canvas.getContext("2d");

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.beginPath();
 ctx.font = "30px Comic Sans MS";
 ctx.fillText(rocket,ballX,ballY);

}

function stars(_gameCanvasSetted_) {
 
  const canvasSize = _gameCanvas_.width * _gameCanvas_.height;
 
  const starsFraction = canvasSize / 2000;

  for(let i = 0; i < starsFraction; i++) {
    //Set up random elements
    let xPos = random(2, _gameCanvas_.width - 2);
    let yPos = random(2, _gameCanvas_.height - 2);
    let alpha = random(0.5, 1);
    let size = random(1, 5);

    //Add stars
    _gameCanvasSetted_.fillStyle = 'white';
    _gameCanvasSetted_.globalAlpha = alpha;
    _gameCanvasSetted_.fillRect(xPos, yPos, size, size);
  }

}

function getCenterLeft(){
   
  x = (_gameCanvas_.offsetWidth/2);
 y = (_gameCanvas_.scrollHeight/2);
  return [x,y];
}

// Random Number
function random(min, max) {
  return min + Math.random() * (max + 1 - min);
}


 

//FINE THE GAME
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////